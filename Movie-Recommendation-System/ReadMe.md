# ðŸŽ¬ AI-Based Movie Recommendation CLI App

This is a Java-based command-line application that provides AI-powered movie recommendations using two APIs and a PostgreSQL database. The app supports user registration, profile updates, movie search history, and premium account features.

---
## âœ… Features
- AI-based movie recommendations
- Movie detail fetching via external API
- User accounts and profile management
- Premium user features
- Search history tracking
- PostgreSQL integration with JDBC & HikariCP


## ðŸ“¦ Submission Contents

### âœ… Required Files
 - inside `sql/`
      - ðŸ“„ `tables.sql`: Table creations
      - ðŸ“„ `views.sql`: View Creations
      - ðŸ“„ `functions.sql`: Function Creations
      - ðŸ“„ `triggers.sql`: Trigger Creations
      - ðŸ“„ `cronjob/clear_old_queries.sql`: SQL script for the cron job that handles data cleanup tasks (removes old queries and query-movie relations).

- ðŸ“„ `docs/user_stories.md` â€“ includes at least **8 user stories** describing user interactions and goals

- ðŸ–¼ `docs/ERD.png` â€“ screenshot of the Entity-Relationship Diagram (generated by PGAdmin or LucidChart)
- ðŸ“¸ `docs/cronjob_screenshots/cronjob_overview.png` â€“ screenshot of the cron job configuration
- ðŸ“¸ `docs/cronjob_screenshots/cronjob_status.png` â€“ screenshot of the cron job status

---

### âœ… Optional (Bonus) Java CLI Application

**Included in this submission:**

- âœ… Full source code (`/src` folder)
- âœ… This `README.md` file explaining how to run the application
- âœ… All SQL dependencies in the `/sql` folder
- âœ… Environment variable configuration notes

---

## âœ… Features

- AI-generated movie recommendations
- Movie detail fetching via external API
- User registration and profile management
- Premium upgrade option
- Search history tracking
- PostgreSQL integration using JDBC and HikariCP

---

## ðŸš€ How to Run

### Step 1: Clone the Repository

```bash
git clone git@github.com:maryamghm/Unit05-W05-Database-Project.git
```

### Step 2: Set Up the Database
Make sure PostgreSQL is installed and running on your system.
1. Create a new database named `ai_based_movie_recommendation_system`
2. Run the SQL setup files found in the /sql/ folder or database.sql.

You can execute the scripts in order:
- tables.sql â€“ to create tables
- views.sql, functions.sql, triggers.sql â€“ for the additional logic


### Step 3: Set Environment Variables

To use this application, you must set the following environment variables:

| Variable        | Description                                                               |
|-----------------|---------------------------------------------------------------------------|
| `DB_URL`        | JDBC URL for PostgreSQL (e.g., `jdbc:postgresql://localhost:5432/`)       |
| `DB_USER`       | Your PostgreSQL username                                                  |
| `DB_PASSWORD`   | Your PostgreSQL password                                                  |
| `MOVIE_API_KEY` | API key for The Movie Database (TMDb) API for movie data.                 |
| `AI_API_KEY`    | API key for Hugging Face API for the AI-based movie recommendation model. | 


### Cron Job for Automated Data Cleanup

This project includes a cron job that runs scheduled tasks to clean up outdated data from the database. Specifically, the cron job performs the following tasks:

- **Deletes old query-movie relationships**: Removes entries from the `query_movies` table where the associated `query_id` is older than 6 months.
- **Deletes old queries**: Removes entries from the `queries` table that are older than 6 months.
